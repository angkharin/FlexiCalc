<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="image/logo.png">
  <title>Freelance Tax Calculator</title>
  <style>
    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á body */
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #d3969f;
      padding: 20px;
    }
    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    /* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */
    h1 {
      text-align: center;
      color: #af3b4d;
    }
    /* ‡∏õ‡πâ‡∏≤‡∏¢ label */
    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
    }
    /* ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç*/
    input, select {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-top: 5px;
      box-sizing: border-box;
    }
    /* ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì */
    button {
      margin-top: 20px;
      width: 100%;
      background-color: #af3b4d;
      color: white;
      border: none;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 6px;
    }

    button:hover {
      background: #8c1d2e;
    }

    .result{
      margin-top: 20px;
      font-size: 15px;
      color: #333;
    } 
    .note{
      margin-top: 20px;
      font-size: 15px;
      color: #333;
    }
    .example {
      margin-top: 10px;
      font-size: 15px;
      color: #333;
    }
    .note {
      font-size: 13px;
      color: #777;
      background: #f9f9f9;
      border-left: 4px solid #ccc;
    }
    /*‡∏•‡∏¥‡∏á‡∏Ñ‡πå‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•*/
    .source {
      margin-top: 15px;
      font-size: 13px;
      text-align: center;
    }

    .source a {
      color: #1976d2;
    }
  </style>
</head>
<body>
<div class="container">
  <h1 id="title">Freelance Tax Calculator</h1>
  <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
  <label id="label-income">Total annual income (THB):</label>
  <input type="text" id="income" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ">
  <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ -->
  <label id="label-expense">Expense type:</label>
  <select id="expenseType">
    <option value="60">General freelancer (60% deduction)</option>
    <option value="50">Service/consultant (50% deduction)</option>
  </select>
  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì -->
  <button onclick="calculateTax()" id="calcBtn">Calculate Tax</button>
  <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
  <div class="result">
    <h3 id="resultTitle"></h3>
    <div id="resultBox"></div> 
  </div>
  <div class="example" id="exampleBox"></div>
  <div class="note" id="noteBox"></div>
  <div class="source">
    üîó <a href="https://www.rd.go.th" target="_blank">‡∏Å‡∏£‡∏°‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£ / Thai Revenue Department</a>
  </div>
</div>

<script>
  const isThai = (navigator.language || '').startsWith("th");

  // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ UI ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
  document.title = isThai ? "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå" : "Freelance Tax Calculator";
  document.getElementById("income").placeholder = isThai ? "‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ" : "Enter income for the whole year";
  document.getElementById("title").textContent = isThai ? "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå" : "Freelance Tax Calculator";
  document.getElementById("label-income").textContent = isThai ? "‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ (‡∏ö‡∏≤‡∏ó):" : "Total annual income (THB):";
  document.getElementById("label-expense").textContent = isThai ? "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢:" : "Expense type:";
  document.getElementById("expenseType").options[0].textContent = isThai ? "‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ 60%)" : "General freelancer (60%)";
  document.getElementById("expenseType").options[1].textContent = isThai ? "‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£/‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤ (‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ 50%)" : "Service/consultant (50%)";
  document.getElementById("calcBtn").textContent = isThai ? "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ" : "Calculate Tax";

  // ‚úÖ ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î
  document.getElementById("resultTitle").textContent = "";

  const personalDeduction = 60000;

  function calculateTax() {
    // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
    document.getElementById("resultTitle").innerHTML = `<span style="font-size: 20px;">${isThai ? "‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå" : "Result"}</span>`;
    document.getElementById("resultBox").innerHTML = `
  `;
    const raw = document.getElementById("income").value.replace(/,/g, '');
    const income = parseFloat(raw);
    const expensePercent = parseInt(document.getElementById("expenseType").value);
    const resultBox = document.getElementById("resultBox");
    const exampleBox = document.getElementById("exampleBox");
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if (isNaN(income) || income <= 0) {
      alert(isThai ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" : "Please enter a valid amount.");
      return;
    }
    // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏ô 15 ‡∏´‡∏•‡∏±‡∏Å
    if (raw.replace('.', '').length > 15) {
      alert(isThai ? "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏Å‡∏¥‡∏ô 15 ‡∏´‡∏•‡∏±‡∏Å‡πÑ‡∏î‡πâ" : "Cannot calculate numbers exceeding 15 digits.");
      return;
    }
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢
    const expense = +(income * expensePercent / 100).toFixed(2);
    const afterExpense = income - expense;
    const netIncome = Math.max(afterExpense - personalDeduction, 0);

    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡πÅ‡∏ö‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î
    const brackets = [
      { max: 150000, rate: 0 },
      { max: 300000, rate: 0.05 },
      { max: 500000, rate: 0.10 },
      { max: 750000, rate: 0.15 },
      { max: 1000000, rate: 0.20 },
      { max: 2000000, rate: 0.25 },
      { max: 5000000, rate: 0.30 },
      { max: Infinity, rate: 0.35 }
    ];
    let tax = 0;
    let remaining = netIncome;
    let last = 0;
    let bracketSteps = [];
    for (const bracket of brackets) {
      if (remaining <= 0) break;
      const range = Math.min(bracket.max - last, remaining);
      const taxThisBracket = +(range * bracket.rate).toFixed(2);
      if (bracket.rate > 0 && range > 0) {
        bracketSteps.push(
          isThai
            ? `${last.toLocaleString()} ‡∏ñ‡∏∂‡∏á ${(last + range).toLocaleString()} = ${range.toLocaleString()} √ó ${Math.round(bracket.rate * 100)}% = ${taxThisBracket.toLocaleString()}`
            : `${last.toLocaleString()} to ${(last + range).toLocaleString()} = ${range.toLocaleString()} √ó ${Math.round(bracket.rate * 100)}% = ${taxThisBracket.toLocaleString()}`
        );
      }
      tax += taxThisBracket;
      remaining -= range;
      last = bracket.max;
    }

    // ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
    document.getElementById ("resultBox").innerHTML = `
    <div style="margin-bottom:6px;">üí∞ ${isThai ? "‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô" : "Net taxable income"}: ${netIncome.toLocaleString()}<br>
    <div style="margin-bottom:18px;">üßæ ${isThai ? "‡∏†‡∏≤‡∏©‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞" : "Estimated tax"}: ${tax.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ‡∏ö‡∏≤‡∏ó
  `;

    //‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
    document.getElementById ("exampleBox").innerHTML = `
      <h3 style="margin-bottom: -5px;">${isThai ? "üîç ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:" : "üîç Example Calculation:"}</h3><br>
      ${isThai ? `‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î = ${income.toLocaleString()} ‡∏ö‡∏≤‡∏ó<br>
      ‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ = ${income.toLocaleString()} √ó ${expensePercent}% = ${expense.toLocaleString()}<br>
      ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ = ${income.toLocaleString()} ‚àí ${expense.toLocaleString()} = ${afterExpense.toLocaleString()}<br>
      ‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß = ${personalDeduction.toLocaleString()}<br>
      ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ = ${afterExpense.toLocaleString()} ‚àí ${personalDeduction.toLocaleString()} = ${netIncome.toLocaleString()} ‡∏ö‡∏≤‡∏ó<br>
      ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡πÅ‡∏ö‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î:<br> ${bracketSteps.map(step => `- ${step}`).join("<br>")}<br>
      ‡∏£‡∏ß‡∏°‡∏†‡∏≤‡∏©‡∏µ = ${tax.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ‡∏ö‡∏≤‡∏ó`
      :
      `Total income = ${income.toLocaleString()}<br>
      Deduct ${income.toLocaleString()} √ó ${expensePercent}% = ${expense.toLocaleString()}<br>
      Net income = ${income.toLocaleString()} ‚àí ${expense.toLocaleString()} = ${afterExpense.toLocaleString()}<br>
      Deduct personal allowance = ${personalDeduction.toLocaleString()}<br>
      Net taxable income = ${afterExpense.toLocaleString()} ‚àí ${personalDeduction.toLocaleString()} = ${netIncome.toLocaleString()} bath<br>
      Tax calculated using brackets:<br> ${bracketSteps.map(step => `- ${step}`).join("<br>")}<br>
      ‡∏£‡∏ß‡∏°‡∏†‡∏≤‡∏©‡∏µ = ${tax.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} bath`
    }
    `;

    //‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
    document.getElementById("noteBox").innerHTML = isThai
      ? "üìù ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏©‡∏µ‡πÑ‡∏î‡πâ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏©‡∏µ"
      : "üìù This tax calculator is intended for preliminary informational purposes only and should not be used as legal, tax, or financial advice. Users are encouraged to consult professionals or relevant authorities before making any financial or tax-related decisions.";
    document.getElementById("noteBox").style.padding = "10px";
  }

  // ‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
  document.getElementById("income").addEventListener("keydown", function (e) {
    if (e.key === "Enter") {
      e.preventDefault();
      calculateTax();
    }
  });

  // ‡πÉ‡∏™‡πà comma
  document.getElementById("income").addEventListener("input", function () {
    let val = this.value.replace(/,/g, '').replace(/[^\d.]/g, '');
    const parts = val.split('.');
    const intPart = parts[0].replace(/^0+(?!$)/, '');
    const decPart = parts[1] || '';
    this.value = decPart
      ? `${intPart.replace(/\B(?=(\d{3})+(?!\d))/g, ",")}.${decPart}`
      : intPart.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  });
</script>
</body>
</html>
