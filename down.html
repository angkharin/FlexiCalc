<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="image/logo.png">
  <title>Down Payment Calculator</title>
  <style>
    /* ‚úÖ ‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á body */
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #dcedc8;
      margin: 0;
      padding: 20px;
    }

    /* ‚úÖ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå */
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    }

    /* ‚úÖ ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å */
    h1 {
      text-align: center;
      color: #7cb342;
    }

    /* ‚úÖ ‡∏õ‡πâ‡∏≤‡∏¢ label */
    label {
      display: block;
      font-weight: bold;
      margin-top: 15px;
    }

    /* ‚úÖ ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å */
    input {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-top: 5px;
      box-sizing: border-box;
    }

    /* ‚úÖ ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì */
    button {
      margin-top: 20px;
      width: 100%;
      padding: 10px;
      font-size: 16px;
      background: #689f38;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background: #558b2f;
    }

    /* ‚úÖ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå */
    .result {
      margin-top: 25px;
      font-size: 15px;
      color: #333;
    }

    /* ‚úÖ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì */
    .example {
      margin-top: 25px;
      font-size: 15px;
      color: #333;
    }

    /* ‚úÖ ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏¢‡πà‡∏≠‡∏¢ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå & ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á */
    .result h3,
    .example h3 {
      font-size: 20px;      /* ‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */
      margin-top: 0;         /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏ö‡∏ô */
      margin-bottom: 10px;   /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á */
    }

    /* ‚úÖ ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ */
    .note {
      margin-top: 25px;
      font-size: 13px;
      color: #777;
      background: #f9f9f9;
      border-left: 4px solid #ccc;
      padding: 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="title">Down Payment Calculator</h1>

    <!-- ‚úÖ ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
    <label id="label-price">Car Price:</label>
    <input type="text" id="carPrice" placeholder="Enter car price" />

    <label id="label-down">Down Payment (% or amount):</label>
    <input type="text" id="downPayment" placeholder="Enter down payment percent or amount" />

    <label id="label-rate">Interest Rate (% per year):</label>
    <input type="number" id="interestRate" placeholder="Interest rate" />

    <label id="label-years">Loan Term (years):</label>
    <input type="number" id="loanYears" placeholder="Number of years" />

    <button onclick="calculateLoan()" id="calcBtn">Calculate</button>

    <!-- ‚úÖ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
    <div class="result" style="display:none;">
      <h3 id="resultTitle"></h3>
      <div id="resultBox"></div>
    </div>

    <!-- ‚úÖ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì -->
    <div class="example" style="display:none;">
      <h3 id="exampleTitle"></h3>
      <div id="exampleBox"></div>
    </div>

    <!-- ‚úÖ ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ -->
    <div class="note" id="noteBox" style="display:none;"></div>
  </div>

  <script>
    const isThai = (navigator.language || '').toLowerCase().startsWith('th');

    // ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤
    const txt = {
      title: isThai ? '‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå' : 'Down Payment Calculator',
      price: isThai ? '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ñ:' : 'Car Price:',
      down: isThai ? '‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå (% ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô):' : 'Down Payment (% or amount):',
      rate: isThai ? '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (% ‡∏ï‡πà‡∏≠‡∏õ‡∏µ):' : 'Interest Rate (% per year):',
      years: isThai ? '‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡πà‡∏≠‡∏ô (‡∏õ‡∏µ):' : 'Loan Term (years):',
      button: isThai ? '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì' : 'Calculate',
      result: isThai ? '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå' : 'Result',
      example: isThai ? 'üîç ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:' : 'üîç Example Calculation:',
      note: isThai 
        ? 'üìù ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏£‡∏¥‡∏á‡∏≠‡∏≤‡∏à‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤'
        : 'üìù This result is only a preliminary estimate based on general formulas. Actual figures may vary depending on the financial institution‚Äôs conditions, interest rates, promotions, or additional fees. Please verify details with your bank or finance company before making any commitments.'
    };

    // ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ UI
    document.title = txt.title;
    document.getElementById('title').textContent = txt.title;
    document.getElementById('label-price').textContent = txt.price;
    document.getElementById('label-down').textContent = txt.down;
    document.getElementById('label-rate').textContent = txt.rate;
    document.getElementById('label-years').textContent = txt.years;
    document.getElementById('calcBtn').textContent = txt.button;

    // ‚úÖ Placeholder
    document.getElementById('carPrice').placeholder = isThai ? '‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ñ' : 'Enter car price';
    document.getElementById('downPayment').placeholder = isThai ? '‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô' : 'Enter down payment percent or amount';
    document.getElementById('interestRate').placeholder = isThai ? '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢' : 'Interest rate';
    document.getElementById('loanYears').placeholder = isThai ? '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡∏µ' : 'Number of years';

    // ‚úÖ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
    function calculateLoan() {
      const rawPrice = document.getElementById('carPrice').value.replace(/,/g,'').trim();
      const rawDown = document.getElementById('downPayment').value.trim();
      const price = parseFloat(rawPrice);
      let down = 0;
      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å
      if (rawDown.includes('%')) {
        const percent = parseFloat(rawDown.replace('%','').trim());
        if (isNaN(percent) || percent < 0 || percent > 100) {
          alert(isThai ? '‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á' : 'Invalid down payment percentage');
          return;
        }
        down = price * (percent / 100);
      } else {
        const downNumber = parseFloat(rawDown.replace(/,/g,''));
        if (isNaN(downNumber) || downNumber < 0) {
          alert(isThai ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á' : 'Invalid down payment value');
          return;
        }
        down = downNumber;
      }

      const rate = parseFloat(document.getElementById('interestRate').value);
      const years = parseFloat(document.getElementById('loanYears').value);
      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å
      if (isNaN(price) || isNaN(rate) || isNaN(years) || price <= 0 || rate < 0 || years <= 0) {
        alert(isThai ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á' : 'Please enter valid inputs.');
        return;
      }
      // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏ô 15 ‡∏´‡∏•‡∏±‡∏Å
      if (rawPrice.replace('.','').length > 15) {
        alert(isThai ? '‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏Å‡∏¥‡∏ô 15 ‡∏´‡∏•‡∏±‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ' : 'Numbers over 15 digits are not allowed.');
        return;
      }

      const finance = price - down;
      const interestPerYear = finance * (rate / 100);
      const totalInterest = interestPerYear * years;
      const totalPayment = finance + totalInterest;
      const monthly = totalPayment / (years * 12);

      // ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠
      document.getElementById('resultTitle').innerHTML = `<h3>${txt.result}</h3>`;
      document.getElementById('exampleTitle').innerHTML = `<h3>${txt.example}</h3>`;

      // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á
      document.querySelector('.result').style.display = 'block';
      document.querySelector('.example').style.display = 'block';
      document.getElementById('noteBox').style.display = 'block';

      // ‚úÖ ‡πÉ‡∏™‡πà‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
      document.getElementById('resultBox').innerHTML = `
        ${isThai ? '‡∏¢‡∏≠‡∏î‡∏à‡∏±‡∏î‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå:' : 'Finance Amount:'} ${finance.toLocaleString(undefined,{maximumFractionDigits:2})} <br>
        ${isThai ? '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:' : 'Total Interest:'} ${totalInterest.toLocaleString(undefined,{maximumFractionDigits:2})} <br>
        ${isThai ? '‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢:' : 'Total Payment:'} ${totalPayment.toLocaleString(undefined,{maximumFractionDigits:2})} <br>
        ${isThai ? '‡∏Ñ‡πà‡∏≤‡∏á‡∏ß‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:' : 'Monthly Payment:'} ${monthly.toLocaleString(undefined,{maximumFractionDigits:2})}
      `;

      document.getElementById('exampleBox').innerHTML = `
        ${isThai 
          ? `‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ñ - ‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå = ${price.toLocaleString()} - ${down.toLocaleString()} = ${finance.toLocaleString()}<br>
             ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ï‡πà‡∏≠‡∏õ‡∏µ = ${finance.toLocaleString()} √ó ${rate}% = ${interestPerYear.toLocaleString()}<br>
             ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î = ${interestPerYear.toLocaleString()} √ó ${years} = ${totalInterest.toLocaleString()}<br>
             ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢ = ${finance.toLocaleString()} + ${totalInterest.toLocaleString()} = ${totalPayment.toLocaleString()}<br>
             ‡∏Ñ‡πà‡∏≤‡∏á‡∏ß‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô = ${totalPayment.toLocaleString()} √∑ ${years*12} = ${monthly.toLocaleString(undefined,{maximumFractionDigits:2})}`
          : `Car price - Down payment = ${price.toLocaleString()} - ${down.toLocaleString()} = ${finance.toLocaleString()}<br>
             Annual interest = ${finance.toLocaleString()} √ó ${rate}% = ${interestPerYear.toLocaleString()}<br>
             Total interest = ${interestPerYear.toLocaleString()} √ó ${years} = ${totalInterest.toLocaleString()}<br>
             Total payment = ${finance.toLocaleString()} + ${totalInterest.toLocaleString()} = ${totalPayment.toLocaleString()}<br>
             Monthly = ${totalPayment.toLocaleString()} √∑ ${years*12} = ${monthly.toLocaleString(undefined,{maximumFractionDigits:2})}`
      }`;

      document.getElementById('noteBox').innerHTML = txt.note;
      document.getElementById('noteBox').style.padding = '10px';
    }

    // ‚úÖ ‡πÉ‡∏™‡πà comma ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    document.getElementById("carPrice").addEventListener("input", function () {
      const val = this.value.replace(/,/g,'').replace(/[^\d.]/g,'');
      const parts = val.split('.');
      const intPart = parts[0].replace(/^0+(?!$)/, '');
      const decPart = parts[1] || '';
      this.value = decPart ? `${intPart.replace(/\B(?=(\d{3})+(?!\d))/g,",")}.${decPart}` : intPart.replace(/\B(?=(\d{3})+(?!\d))/g,",");
    });
    document.getElementById("downPayment").addEventListener("input", function () {
      if (this.value.includes('%')) return;
      const val = this.value.replace(/,/g,'').replace(/[^\d.]/g,'');
      const parts = val.split('.');
      const intPart = parts[0].replace(/^0+(?!$)/, '');
      const decPart = parts[1] || '';
      this.value = decPart ? `${intPart.replace(/\B(?=(\d{3})+(?!\d))/g,",")}.${decPart}` : intPart.replace(/\B(?=(\d{3})+(?!\d))/g,",");
    });

    document.getElementById("interestRate").addEventListener("input", function () {
      const val = this.value.replace(/,/g,'').replace(/[^\d.]/g,'');
      const parts = val.split('.');
      const intPart = parts[0].replace(/^0+(?!$)/, '');
      const decPart = parts[1] || '';
      this.value = decPart ? `${intPart.replace(/\B(?=(\d{2})+(?!\d))/g,",")}.${decPart}` : intPart.replace(/\B(?=(\d{2})+(?!\d))/g,",");
    });

    document.getElementById("loanYears").addEventListener("input", function () {
      const val = this.value.replace(/,/g,'').replace(/[^\d.]/g,'');
      const parts = val.split('.');
      const intPart = parts[0].replace(/^0+(?!$)/, '');
      const decPart = parts[1] || '';
      this.value = decPart ? `${intPart.replace(/\B(?=(\d{3})+(?!\d))/g,",")}.${decPart}` : intPart.replace(/\B(?=(\d{3})+(?!\d))/g,",");
    });

    // ‚úÖ Enter flow
    document.getElementById("carPrice").addEventListener("keydown", function (e) {
      if (e.key === "Enter") { e.preventDefault(); document.getElementById("downPayment").focus(); }
    });
    document.getElementById("downPayment").addEventListener("keydown", function (e) {
      if (e.key === "Enter") { e.preventDefault(); document.getElementById("interestRate").focus(); }
    });
    document.getElementById("interestRate").addEventListener("keydown", function (e) {
      if (e.key === "Enter") { e.preventDefault(); document.getElementById("loanYears").focus(); }
    });
    document.getElementById("loanYears").addEventListener("keydown", function (e) {
      if (e.key === "Enter") { e.preventDefault(); calculateLoan(); }
    });
  </script>
</body>
</html>
