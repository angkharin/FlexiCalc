<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="image/logo.png">
  <title>Personal Tax Calculator</title>
  <style>
    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á body */
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fbe9e7;
      padding: 20px;
      margin: 0;
    }
    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    /* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */
    h1 {
      text-align: center;
      color: #ff5722;
    }
    /* ‡∏õ‡πâ‡∏≤‡∏¢ label */
    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
    }
    /* ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç*/
    input, select {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-top: 5px;
      box-sizing: border-box;
    }
    /* ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì */
    button {
      margin-top: 20px;
      width: 100%;
      background-color: #ff5722;
      color: white;
      border: none;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 6px;
    }
    button:hover {
      background: #f4511e;
    }
    .result{
      margin-top: 20px;
      font-size: 15px;
      color: #333;
    }
    .example {
      margin-top: 20px;
      font-size: 15px;
      color: #333;
    }
    .note {
      margin-top: 20px;
      font-size: 15px;
      color: #333;
    }
    .note {
      font-size: 13px;
      color: #777;
      background: #f9f9f9;
      border-left: 4px solid #ccc;
    }
    /*‡∏•‡∏¥‡∏á‡∏Ñ‡πå‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•*/
    .source {
      margin-top: 15px;
      font-size: 13px;
      text-align: center;
    }
    .source a {
      color: #1976d2;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="title">Personal Income Tax Calculator</h1>
    <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
    <label id="label-income">Total annual income (THB):</label>
    <input type="text" id="income" placeholder="Enter annual income">
    <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏†‡∏≤‡∏û‡∏™‡∏°‡∏£‡∏™ -->
    <label id="label-status">Marital status:</label>
    <select id="statusSelect">
      <option value="single">Single</option>
      <option value="married">Married</option>
    </select>
    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì -->
    <button onclick="calculateTax()" id="calcBtn">Calculate Tax</button>
    <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
    <div class="result">
    <h3 id="resultTitle"></h3>
    <div id="resultBox"></div> 
  </div>
    <div class="example" id="exampleBox"></div>
    <div class="note" id="noteBox"></div>

    <div class="source">
      üîó <a href="https://www.rd.go.th" target="_blank">Source: Thai Revenue Department</a>
    </div>
  </div>

  <script>
    const isThai = (navigator.language || '').toLowerCase().startsWith('th');

    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤
    document.title = isThai ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤' : 'Personal Income Tax Calculator';
    document.getElementById('title').textContent = isThai 
      ? '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤' 
      : 'Personal Income Tax Calculator';
    document.getElementById('income').placeholder = isThai 
      ? '‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ' 
      : 'Enter annual income';
    document.getElementById('label-income').textContent = isThai 
      ? '‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ (‡∏ö‡∏≤‡∏ó):' 
      : 'Total annual income (THB):';
    document.getElementById('label-status').textContent = isThai 
      ? '‡∏™‡∏ñ‡∏≤‡∏ô‡∏†‡∏≤‡∏û‡∏™‡∏°‡∏£‡∏™:' 
      : 'Marital status:';
    document.getElementById('statusSelect').options[0].textContent = isThai ? '‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏£‡∏™' : 'Single';
    document.getElementById('statusSelect').options[1].textContent = isThai ? '‡∏™‡∏°‡∏£‡∏™‡πÅ‡∏•‡πâ‡∏ß' : 'Married';
    document.getElementById('calcBtn').textContent = isThai ? '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ' : 'Calculate Tax';
    document.querySelector('.source a').textContent = isThai ? '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏°‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£' : 'Source: Thai Revenue Department';

    // ‡∏´‡∏±‡∏Å‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß: ‡πÇ‡∏™‡∏î 60,000 ‡∏™‡∏°‡∏£‡∏™‡πÄ‡∏û‡∏¥‡πà‡∏° 60,000 ‡∏Ñ‡∏π‡πà‡∏™‡∏°‡∏£‡∏™
    const deductionSingle = 60000;
    const deductionMarried = 120000;
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤
    function calculateTax() {
      document.getElementById("resultTitle").innerHTML = `<span style="font-size: 20px;">${isThai ? "‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå" : "Result"}</span>`;
      document.getElementById("resultBox").innerHTML = `
    `;
      const raw = document.getElementById('income').value.replace(/,/g,'');
      const income = parseFloat(raw);
      const status = document.getElementById('statusSelect').value;
      const resultBox = document.getElementById('resultBox');
      const exampleBox = document.getElementById('exampleBox');
      const noteBox = document.getElementById('noteBox');
      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
      if(isNaN(income) || income <= 0) {
        alert(isThai 
          ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô' 
          : 'Please enter a valid amount.');
        return;
      }
      // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏ô 15 ‡∏´‡∏•‡∏±‡∏Å
      if(raw.replace('.', '').length > 15) {
        alert(isThai 
          ? '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏Å‡∏¥‡∏ô 15 ‡∏´‡∏•‡∏±‡∏Å‡πÑ‡∏î‡πâ' 
          : 'Cannot calculate numbers exceeding 15 digits.');
        return;
      }
      // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏´‡∏±‡∏Å‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô
      const personal = deductionSingle;
      const totalDeduction = personal + (status==='married'? deductionSingle:0);
      const netIncome = Math.max(income - totalDeduction, 0);

      // ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏Ç‡∏±‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏°‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£)
      const brackets = [
        { max: 150000, rate: 0 },
        { max: 300000, rate: 0.05 },
        { max: 500000, rate: 0.10 },
        { max: 750000, rate: 0.15 },
        { max: 1000000, rate: 0.20 },
        { max: 2000000, rate: 0.25 },
        { max: 5000000, rate: 0.30 },
        { max: Infinity, rate: 0.35 }
      ];
      // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ
      let tax = 0, remaining = netIncome, last = 0;
      let steps = [];
      // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î
      for(const b of brackets) {
        if(remaining<=0) break;
        const span = Math.min(b.max - last, remaining);
        const tx = +(span * b.rate).toFixed(2);
        if(b.rate>0 && span>0) {
          steps.push(isThai 
            ? `${last.toLocaleString()} ‡∏ñ‡∏∂‡∏á ${(last+span).toLocaleString()} = ${span.toLocaleString()} √ó ${b.rate*100}% = ${tx.toLocaleString()}`
            : `${last.toLocaleString()} to ${(last+span).toLocaleString()} = ${span.toLocaleString()} √ó ${(b.rate*100)}% = ${tx.toLocaleString()}`);
        }
        tax += tx;
        remaining -= span;
        last = b.max;
      }
      //‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
      document.getElementById ("resultBox").innerHTML = `
      <div style="margin-top:-10px;">
        üí∞ ${isThai ? '‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô' : 'Net taxable income'}: ${netIncome.toLocaleString()}<br>
        üßæ ${isThai ? '‡∏†‡∏≤‡∏©‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞' : 'Estimated tax'}: ${tax.toLocaleString(undefined, {minimumFractionDigits:2})} ‡∏ö‡∏≤‡∏ó
      `;
      //‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
      exampleBox.innerHTML = `<strong style="font-size: 18px; display: inline-block; margin-bottom: 10px;">${isThai ? 'üîç ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:' : 'üîç Example Calculation:'}</strong><br>` +
        (isThai
          ? `‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î = ${income.toLocaleString()} ‡∏ö‡∏≤‡∏ó<br>
            ‡∏´‡∏±‡∏Å‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß = ${personal.toLocaleString()} ‡∏ö‡∏≤‡∏ó<br>
            ${status==='married'?'‡∏´‡∏±‡∏Å‡∏Ñ‡∏π‡πà‡∏™‡∏°‡∏£‡∏™ = '+personal.toLocaleString()+' ‡∏ö‡∏≤‡∏ó<br>':''}
            ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ = ${income.toLocaleString()} ‚àí ${totalDeduction.toLocaleString()} = ${netIncome.toLocaleString()} ‡∏ö‡∏≤‡∏ó<br>
            ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡∏Ç‡∏±‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î:<br>${steps.map(s=>`- ${s}`).join('<br>')}<br>
            ‡∏£‡∏ß‡∏°‡∏†‡∏≤‡∏©‡∏µ = ${tax.toLocaleString(undefined,{minimumFractionDigits:2})} ‡∏ö‡∏≤‡∏ó`
          : `Total income = ${income.toLocaleString()}<br>
            Personal deduction = ${personal.toLocaleString()} THB<br>
            ${status==='married'?'Spouse deduction = '+personal.toLocaleString()+' THB<br>':''}
            Net taxable income = ${income.toLocaleString()} ‚àí ${totalDeduction.toLocaleString()} = ${netIncome.toLocaleString()}<br>
            Tax brackets calculations:<br>${steps.map(s=>`- ${s}`).join('<br>')}<br>
            Total tax = ${tax.toLocaleString(undefined,{minimumFractionDigits:2})} THB`
        );
      //‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
      noteBox.innerHTML = isThai
        ? "üìù ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏©‡∏µ‡πÑ‡∏î‡πâ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏©‡∏µ"
        : "üìù This tax calculator is intended for preliminary informational purposes only and should not be used as legal, tax, or financial advice. Users are encouraged to consult professionals or relevant authorities before making any financial or tax-related decisions.";
      document.getElementById("noteBox").style.padding = "10px"; // ‡πÄ‡∏û‡∏¥‡πà‡∏° padding
      }
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î Enter
    document.getElementById('income').addEventListener('keydown', e => {
      if(e.key==='Enter') { e.preventDefault(); calculateTax(); }
    });
    //‡πÉ‡∏™‡πà ‡∏Ñ‡∏≠‡∏°‡∏°‡πà‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏á‡∏¥‡∏ô
    document.getElementById('income').addEventListener('input', function() {
      let v = this.value.replace(/,/g,'').replace(/[^\d.]/g,'');
      const parts = v.split('.');
      const intP = parts[0].replace(/^0+(?!$)/,'');
      const decP = parts[1] || '';
      this.value = decP ?
        `${intP.replace(/\B(?=(\d{3})+(?!\d))/g, ",")}.${decP}` :
        intP.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    });
  </script>
</body>
</html>
